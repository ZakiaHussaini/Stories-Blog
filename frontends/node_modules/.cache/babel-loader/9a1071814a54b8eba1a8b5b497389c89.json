{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zakia.hussaini\\\\Documents\\\\Stories-Blog-1\\\\frontends\\\\src\\\\contexts\\\\ProfileDataContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\";\nimport { useCurrentUser } from \"../contexts/CurrentUserContext\";\nimport { followHelper, unfollowHelper } from \"../utils/utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileDataContext = /*#__PURE__*/createContext();\nconst SetProfileDataContext = /*#__PURE__*/createContext();\nexport const useProfileData = () => {\n  _s();\n  return useContext(ProfileDataContext);\n};\n_s(useProfileData, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const useSetProfileData = () => {\n  _s2();\n  return useContext(SetProfileDataContext);\n};\n_s2(useSetProfileData, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ProfileDataProvider = _ref => {\n  _s3();\n  let {\n    children\n  } = _ref;\n  const [profileData, setProfileData] = useState({\n    pageProfile: {\n      results: []\n    },\n    popularProfiles: {\n      results: []\n    }\n  });\n  const currentUser = useCurrentUser();\n  const handleFollow = async clickedProfile => {\n    try {\n      const {\n        data\n      } = await axiosRes.post(\"/followers/\", {\n        followed: clickedProfile.id\n      });\n      setProfileData(prevState => ({\n        ...prevState,\n        pageProfile: {\n          results: prevState.pageProfile.results.map(profile => followHelper(profile, clickedProfile, data.id))\n        },\n        popularProfiles: {\n          ...prevState.popularProfiles,\n          results: prevState.popularProfiles.results.map(profile => followHelper(profile, clickedProfile, data.id))\n        }\n      }));\n    } catch (err) {}\n  };\n  const handleUnfollow = async clickedProfile => {\n    try {\n      await axiosRes.delete(`/followers/${clickedProfile.following_id}/`);\n      setProfileData(prevState => ({\n        ...prevState,\n        pageProfile: {\n          results: prevState.pageProfile.results.map(profile => unfollowHelper(profile, clickedProfile))\n        },\n        popularProfiles: {\n          ...prevState.popularProfiles,\n          results: prevState.popularProfiles.results.map(profile => unfollowHelper(profile, clickedProfile))\n        }\n      }));\n    } catch (err) {}\n  };\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        const {\n          data\n        } = await axiosReq.get(\"/profiles/?ordering=-followers_count\");\n        setProfileData(prevState => ({\n          ...prevState,\n          popularProfiles: data\n        }));\n      } catch (err) {}\n    };\n    handleMount();\n  }, [currentUser]);\n  return /*#__PURE__*/_jsxDEV(ProfileDataContext.Provider, {\n    value: profileData,\n    children: /*#__PURE__*/_jsxDEV(SetProfileDataContext.Provider, {\n      value: {\n        setProfileData,\n        handleFollow,\n        handleUnfollow\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s3(ProfileDataProvider, \"JJyOhkck/qns0XhAB8BID8YAgrQ=\", false, function () {\n  return [useCurrentUser];\n});\n_c = ProfileDataProvider;\nvar _c;\n$RefreshReg$(_c, \"ProfileDataProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","axiosReq","axiosRes","useCurrentUser","followHelper","unfollowHelper","jsxDEV","_jsxDEV","ProfileDataContext","SetProfileDataContext","useProfileData","_s","useSetProfileData","_s2","ProfileDataProvider","_ref","_s3","children","profileData","setProfileData","pageProfile","results","popularProfiles","currentUser","handleFollow","clickedProfile","data","post","followed","id","prevState","map","profile","err","handleUnfollow","delete","following_id","handleMount","get","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/src/contexts/ProfileDataContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\";\r\nimport { useCurrentUser } from \"../contexts/CurrentUserContext\";\r\nimport { followHelper, unfollowHelper } from \"../utils/utils\";\r\n\r\nconst ProfileDataContext = createContext();\r\nconst SetProfileDataContext = createContext();\r\n\r\nexport const useProfileData = () => useContext(ProfileDataContext);\r\nexport const useSetProfileData = () => useContext(SetProfileDataContext);\r\n\r\nexport const ProfileDataProvider = ({ children }) => {\r\n  const [profileData, setProfileData] = useState({\r\n    \r\n    pageProfile: { results: [] },\r\n    popularProfiles: { results: [] },\r\n  });\r\n\r\n  const currentUser = useCurrentUser();\r\n\r\n  const handleFollow = async (clickedProfile) => {\r\n    try {\r\n      const { data } = await axiosRes.post(\"/followers/\", {\r\n        followed: clickedProfile.id,\r\n      });\r\n\r\n      setProfileData((prevState) => ({\r\n        ...prevState,\r\n        pageProfile: {\r\n          results: prevState.pageProfile.results.map((profile) =>\r\n            followHelper(profile, clickedProfile, data.id)\r\n          ),\r\n        },\r\n        popularProfiles: {\r\n          ...prevState.popularProfiles,\r\n          results: prevState.popularProfiles.results.map((profile) =>\r\n            followHelper(profile, clickedProfile, data.id)\r\n          ),\r\n        },\r\n      }));\r\n    } catch (err) {\r\n    }\r\n  };\r\n\r\n  const handleUnfollow = async (clickedProfile) => {\r\n    try {\r\n      await axiosRes.delete(`/followers/${clickedProfile.following_id}/`);\r\n\r\n      setProfileData((prevState) => ({\r\n        ...prevState,\r\n        pageProfile: {\r\n          results: prevState.pageProfile.results.map((profile) =>\r\n            unfollowHelper(profile, clickedProfile)\r\n          ),\r\n        },\r\n        popularProfiles: {\r\n          ...prevState.popularProfiles,\r\n          results: prevState.popularProfiles.results.map((profile) =>\r\n            unfollowHelper(profile, clickedProfile)\r\n          ),\r\n        },\r\n      }));\r\n    } catch (err) {\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleMount = async () => {\r\n      try {\r\n        const { data } = await axiosReq.get(\r\n          \"/profiles/?ordering=-followers_count\"\r\n        );\r\n        setProfileData((prevState) => ({\r\n          ...prevState,\r\n          popularProfiles: data,\r\n        }));\r\n      } catch (err) {\r\n      }\r\n    };\r\n\r\n    handleMount();\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <ProfileDataContext.Provider value={profileData}>\r\n      <SetProfileDataContext.Provider\r\n        value={{ setProfileData, handleFollow, handleUnfollow }}\r\n      >\r\n        {children}\r\n      </SetProfileDataContext.Provider>\r\n    </ProfileDataContext.Provider>\r\n  );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}