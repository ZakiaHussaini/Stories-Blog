{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import Navbar from\"react-bootstrap/Navbar\";import Container from\"react-bootstrap/Container\";import Nav from\"react-bootstrap/Nav\";import styles from\"../styles/NavBar.module.css\";import{NavLink}from\"react-router-dom\";import{useCurrentUser,useSetCurrentUser}from\"../contexts/CurrentUserContext\";import Avatar from\"./Avatar\";import axios from\"axios\";import useClickOutsideToggle from\"../hooks/useClickOutsideToggle\";import{removeTokenTimestamp}from\"../utils/utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NavBar=function NavBar(){var currentUser=useCurrentUser();var setCurrentUser=useSetCurrentUser();var _useClickOutsideToggl=useClickOutsideToggle(),expanded=_useClickOutsideToggl.expanded,setExpanded=_useClickOutsideToggl.setExpanded,ref=_useClickOutsideToggl.ref;var handleSignOut=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"dj-rest-auth/logout/\");case 3:setCurrentUser(null);removeTokenTimestamp();_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function handleSignOut(){return _ref.apply(this,arguments);};}();var addPostIcon=/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/posts/create\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-plus-square\"}),\"Add Story\"]})});var loggedInIcons=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/feed\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-stream\"}),\"Feed\"]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/liked\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-heart\"}),\"Liked\"]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/saved\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-save\"}),\"Saved\"]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,to:\"/\",onClick:handleSignOut,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-out-alt\"}),\"Sign out\"]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsx(NavLink,{className:styles.NavLink,to:\"/profiles/\".concat(currentUser===null||currentUser===void 0?void 0:currentUser.profile_id),children:/*#__PURE__*/_jsx(Avatar,{src:currentUser===null||currentUser===void 0?void 0:currentUser.profile_image,text:currentUser===null||currentUser===void 0?void 0:currentUser.username,height:40})})})]});var loggedOutIcons=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/signin\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-in-alt\"}),\"Sign in\"]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{to:\"/signup\",className:styles.NavLink,activeClassName:styles.Active,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-plus\"}),\"Sign up\"]})})]});return/*#__PURE__*/_jsx(Navbar,{expanded:expanded,className:styles.NavBar,expand:\"md\",fixed:\"top\",children:/*#__PURE__*/_jsxs(Container,{className:\"\".concat(styles.NavContainer,\" align-items-center\"),children:[/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:/*#__PURE__*/_jsx(Navbar.Brand,{className:styles.logo,children:\"Story blog\"})}),currentUser&&addPostIcon,/*#__PURE__*/_jsx(Navbar.Toggle,{ref:ref,onClick:function onClick(){return setExpanded(!expanded);},\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",children:/*#__PURE__*/_jsxs(Nav,{className:\"ml-auto text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:/*#__PURE__*/_jsxs(NavLink,{exact:true,className:styles.NavLink,activeClassName:styles.Active,to:\"/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home\"}),\"Home\"]})}),currentUser?loggedInIcons:loggedOutIcons]})})]})});};export default NavBar;","map":{"version":3,"names":["React","Navbar","Container","Nav","styles","NavLink","useCurrentUser","useSetCurrentUser","Avatar","axios","useClickOutsideToggle","removeTokenTimestamp","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NavBar","currentUser","setCurrentUser","_useClickOutsideToggl","expanded","setExpanded","ref","handleSignOut","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","t0","stop","apply","arguments","addPostIcon","className","item","children","activeClassName","Active","to","loggedInIcons","onClick","concat","profile_id","src","profile_image","text","username","height","loggedOutIcons","expand","fixed","NavContainer","Brand","logo","Toggle","Collapse","id","exact"],"sources":["C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/src/components/NavBar.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport styles from \"../styles/NavBar.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport {\r\n  useCurrentUser,\r\n  useSetCurrentUser,\r\n} from \"../contexts/CurrentUserContext\";\r\nimport Avatar from \"./Avatar\";\r\nimport axios from \"axios\";\r\nimport useClickOutsideToggle from \"../hooks/useClickOutsideToggle\";\r\nimport { removeTokenTimestamp } from \"../utils/utils\";\r\n\r\nconst NavBar = () => {\r\n  const currentUser = useCurrentUser();\r\n  const setCurrentUser = useSetCurrentUser();\r\n\r\n  const { expanded, setExpanded, ref } = useClickOutsideToggle();\r\n\r\n  const handleSignOut = async () => {\r\n    try {\r\n      await axios.post(\"dj-rest-auth/logout/\");\r\n      setCurrentUser(null);\r\n      removeTokenTimestamp();\r\n    } catch (err) {\r\n    }\r\n  };\r\n\r\n  \r\n  const addPostIcon = (\r\n    <div className={styles.item}>\r\n      <NavLink\r\n      className={styles.NavLink}\r\n      activeClassName={styles.Active}\r\n      to=\"/posts/create\"\r\n    >\r\n      <i className=\"far fa-plus-square\"></i>Add Story\r\n    </NavLink>\r\n    </div>\r\n  );\r\n  const loggedInIcons = (\r\n    <>\r\n      <div className={styles.item}>\r\n      <NavLink\r\n        className={styles.NavLink}\r\n        activeClassName={styles.Active}\r\n        to=\"/feed\"\r\n      >\r\n        <i className=\"fas fa-stream\"></i>Feed\r\n      </NavLink>\r\n      </div>\r\n\r\n      <div className={styles.item}>\r\n      <NavLink\r\n        className={styles.NavLink}\r\n        activeClassName={styles.Active}\r\n        to=\"/liked\"\r\n      >\r\n        <i className=\"fas fa-heart\"></i>Liked\r\n      </NavLink>\r\n      </div>\r\n\r\n      {/* save post */}\r\n\r\n      <div className={styles.item}>\r\n      <NavLink\r\n        className={styles.NavLink}\r\n        activeClassName={styles.Active}\r\n        to=\"/saved\"\r\n      >\r\n        <i className=\"fas fa-save\"></i>Saved\r\n      </NavLink>\r\n      </div>\r\n\r\n      <div className={styles.item}>\r\n      <NavLink className={styles.NavLink} to=\"/\" onClick={handleSignOut}>\r\n        <i className=\"fas fa-sign-out-alt\"></i>Sign out\r\n      </NavLink>\r\n      </div>\r\n      <div className={styles.item}>\r\n      <NavLink\r\n        className={styles.NavLink}\r\n        to={`/profiles/${currentUser?.profile_id}`}\r\n      >\r\n        <Avatar src={currentUser?.profile_image} text={currentUser?.username} height={40} />\r\n      </NavLink>\r\n      </div>\r\n    </>\r\n  );\r\n  const loggedOutIcons = (\r\n    <>\r\n      <div className={styles.item}>\r\n      <NavLink\r\n        className={styles.NavLink}\r\n        activeClassName={styles.Active}\r\n        to=\"/signin\"\r\n      >\r\n        <i className=\"fas fa-sign-in-alt\"></i>Sign in\r\n      </NavLink>\r\n      </div>\r\n\r\n      <div className={styles.item}>\r\n      <NavLink\r\n        to=\"/signup\"\r\n        className={styles.NavLink}\r\n        activeClassName={styles.Active}\r\n      >\r\n        <i className=\"fas fa-user-plus\"></i>Sign up\r\n      </NavLink>\r\n      </div>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <Navbar\r\n      expanded={expanded}\r\n      className={styles.NavBar}\r\n      expand=\"md\"\r\n      fixed=\"top\"\r\n      \r\n    >\r\n      <Container className={`${styles.NavContainer} align-items-center`}>\r\n        <NavLink to=\"/\">\r\n          <Navbar.Brand className={styles.logo}>\r\n            Story blog\r\n          </Navbar.Brand>\r\n        </NavLink>\r\n        {currentUser && addPostIcon}\r\n        <Navbar.Toggle\r\n          ref={ref}\r\n          onClick={() => setExpanded(!expanded)}\r\n          aria-controls=\"basic-navbar-nav\"\r\n        />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"ml-auto text-left\">\r\n           <div className={styles.item}>\r\n           <NavLink\r\n              exact\r\n              className={styles.NavLink}\r\n              activeClassName={styles.Active}\r\n              to=\"/\"\r\n            >\r\n              <i className=\"fas fa-home\"></i>Home\r\n            </NavLink>\r\n           </div>\r\n\r\n            {currentUser ? loggedInIcons : loggedOutIcons}\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Container>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default NavBar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}