{"ast":null,"code":"import _defineProperty from\"C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import Form from\"react-bootstrap/Form\";import Alert from\"react-bootstrap/Alert\";import Button from\"react-bootstrap/Button\";import Col from\"react-bootstrap/Col\";import Row from\"react-bootstrap/Row\";import Container from\"react-bootstrap/Container\";import{Link,useHistory}from\"react-router-dom\";import styles from\"../../styles/SignInUpForm.module.css\";import btnStyles from\"../../styles/Button.module.css\";import appStyles from\"../../App.module.css\";import{useSetCurrentUser}from\"../../contexts/CurrentUserContext\";import{useRedirect}from\"../../hooks/useRedirect\";import{setTokenTimestamp}from\"../../utils/utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignInForm(){var _errors$username,_errors$password,_errors$non_field_err;var setCurrentUser=useSetCurrentUser();useRedirect(\"loggedIn\");var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),signInData=_useState2[0],setSignInData=_useState2[1];var username=signInData.username,password=signInData.password;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$axios$post,data,_err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"/dj-rest-auth/login/\",signInData);case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setCurrentUser(data.user);setTokenTimestamp(data);history.goBack();_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);setErrors((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.data);case 14:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(event){setSignInData(_objectSpread(_objectSpread({},signInData),{},_defineProperty({},event.target.name,event.target.value)));};return/*#__PURE__*/_jsx(Row,{className:styles.Row,children:/*#__PURE__*/_jsxs(Col,{className:\"my-auto p-0 p-md-2\",md:12,children:[/*#__PURE__*/_jsxs(Container,{className:\"\".concat(appStyles.Content,\"  \").concat(styles.content,\" p-4 \"),children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.Header,children:\"sign in\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"username\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"d-none\",children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Username\",name:\"username\",className:styles.Input,value:username,onChange:handleChange})]}),(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"d-none\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",className:styles.Input,value:password,onChange:handleChange})]}),(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsx(Button,{className:\"\".concat(btnStyles.Button,\" \").concat(btnStyles.Wide,\" \").concat(styles.Bright),type:\"submit\",children:\"Sign in\"}),(_errors$non_field_err=errors.non_field_errors)===null||_errors$non_field_err===void 0?void 0:_errors$non_field_err.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",className:\"mt-3\",children:message},idx);})]})]}),/*#__PURE__*/_jsx(Container,{className:\"mt-3 \".concat(appStyles.Content,\" \").concat(styles.content),children:/*#__PURE__*/_jsxs(Link,{className:styles.Link,to:\"/signup\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"span\",{children:\"Sign up now!\"})]})})]})});}export default SignInForm;","map":{"version":3,"names":["React","useState","axios","Form","Alert","Button","Col","Row","Container","Link","useHistory","styles","btnStyles","appStyles","useSetCurrentUser","useRedirect","setTokenTimestamp","jsx","_jsx","jsxs","_jsxs","SignInForm","_errors$username","_errors$password","_errors$non_field_err","setCurrentUser","_useState","username","password","_useState2","_slicedToArray","signInData","setSignInData","_useState3","_useState4","errors","setErrors","history","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","_yield$axios$post","data","_err$response","wrap","_callee$","_context","prev","next","preventDefault","post","sent","user","goBack","t0","response","stop","_x","apply","arguments","handleChange","_objectSpread","_defineProperty","target","name","value","className","children","md","concat","Content","content","Header","onSubmit","Group","controlId","Label","Control","type","placeholder","Input","onChange","map","message","idx","variant","Wide","Bright","non_field_errors","to"],"sources":["C:/Users/zakia.hussaini/Documents/Stories-Blog-1/frontends/src/pages/auth/SignInForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Container from \"react-bootstrap/Container\";\r\n\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport styles from \"../../styles/SignInUpForm.module.css\";\r\nimport btnStyles from \"../../styles/Button.module.css\";\r\nimport appStyles from \"../../App.module.css\";\r\nimport { useSetCurrentUser } from \"../../contexts/CurrentUserContext\";\r\nimport { useRedirect } from \"../../hooks/useRedirect\";\r\nimport { setTokenTimestamp } from \"../../utils/utils\";\r\n\r\nfunction SignInForm() {\r\n  const setCurrentUser = useSetCurrentUser();\r\n  useRedirect(\"loggedIn\");\r\n\r\n\r\n  const [signInData, setSignInData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  });\r\n  const { username, password } = signInData;\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const history = useHistory();\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    try {\r\n      const { data } = await axios.post(\"/dj-rest-auth/login/\", signInData);\r\n      setCurrentUser(data.user);\r\n      setTokenTimestamp(data)\r\n      history.goBack();\r\n    } catch (err) {\r\n      setErrors(err.response?.data);\r\n    }\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setSignInData({\r\n      ...signInData,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Row className={styles.Row}>\r\n      <Col className=\"my-auto p-0 p-md-2\" md={12}>\r\n        <Container className={`${appStyles.Content}  ${styles.content} p-4 `}>\r\n          <h1 className={styles.Header}>sign in</h1>\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group controlId=\"username\">\r\n              <Form.Label className=\"d-none\">Username</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                name=\"username\"\r\n                className={styles.Input}\r\n                value={username}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Group>\r\n            {errors.username?.map((message, idx) => (\r\n              <Alert key={idx} variant=\"warning\">\r\n                {message}\r\n              </Alert>\r\n            ))}\r\n\r\n            <Form.Group controlId=\"password\">\r\n              <Form.Label className=\"d-none\">Password</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                name=\"password\"\r\n                className={styles.Input}\r\n                value={password}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Group>\r\n            {errors.password?.map((message, idx) => (\r\n              <Alert key={idx} variant=\"warning\">\r\n                {message}\r\n              </Alert>\r\n            ))}\r\n            <Button\r\n              className={`${btnStyles.Button} ${btnStyles.Wide} ${styles.Bright}`}\r\n              type=\"submit\"\r\n            >\r\n              Sign in\r\n            </Button>\r\n            {errors.non_field_errors?.map((message, idx) => (\r\n              <Alert key={idx} variant=\"warning\" className=\"mt-3\">\r\n                {message}\r\n              </Alert>\r\n            ))}\r\n          </Form>\r\n        </Container>\r\n        <Container className={`mt-3 ${appStyles.Content} ${styles.content}`}>\r\n          <Link className={styles.Link} to=\"/signup\">\r\n            Don't have an account? <span>Sign up now!</span>\r\n          </Link>\r\n        </Container>\r\n      </Col>\r\n      \r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default SignInForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}