{"ast":null,"code":"import { axiosReq } from \"../api/axiosDefaults\";\nimport jwtDecode from \"jwt-decode\";\nexport const fetchMoreData = async (resource, setResource) => {\n  try {\n    const {\n      data\n    } = await axiosReq.get(resource.next);\n    setResource(prevResource => ({\n      ...prevResource,\n      next: data.next,\n      results: data.results.reduce((acc, cur) => {\n        return acc.some(accResult => accResult.id === cur.id) ? acc : [...acc, cur];\n      }, prevResource.results)\n    }));\n  } catch (err) {}\n};\nexport const followHelper = (profile, clickedProfile, following_id) => {\n  return profile.id === clickedProfile.id ? {\n    ...profile,\n    followers_count: profile.followers_count + 1,\n    following_id\n  } : profile.is_owner ? {\n    ...profile,\n    following_count: profile.following_count + 1\n  } : profile;\n};\nexport const unfollowHelper = (profile, clickedProfile) => {\n  return profile.id === clickedProfile.id ? {\n    ...profile,\n    followers_count: profile.followers_count - 1,\n    following_id: null\n  } : profile.is_owner ? {\n    ...profile,\n    following_count: profile.following_count - 1\n  } : profile;\n};\nexport const setTokenTimestamp = data => {\n  const refreshTokenTimestamp = jwtDecode(data === null || data === void 0 ? void 0 : data.refresh_token).exp;\n  localStorage.setItem(\"refreshTokenTimestamp\", refreshTokenTimestamp);\n};\nexport const shouldRefreshToken = () => {\n  return !!localStorage.getItem(\"refreshTokenTimestamp\");\n};\nexport const removeTokenTimestamp = () => {\n  localStorage.removeItem(\"refreshTokenTimestamp\");\n};","map":{"version":3,"names":["axiosReq","jwtDecode","fetchMoreData","resource","setResource","data","get","next","prevResource","results","reduce","acc","cur","some","accResult","id","err","followHelper","profile","clickedProfile","following_id","followers_count","is_owner","following_count","unfollowHelper","setTokenTimestamp","refreshTokenTimestamp","refresh_token","exp","localStorage","setItem","shouldRefreshToken","getItem","removeTokenTimestamp","removeItem"],"sources":["C:/Users/Zakia hussaini/Desktop/Stories-Blog/frontends/src/utils/utils.js"],"sourcesContent":["import { axiosReq } from \"../api/axiosDefaults\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\n\r\nexport const fetchMoreData = async (resource, setResource) => {\r\n  try {\r\n    const { data } = await axiosReq.get(resource.next);\r\n    setResource((prevResource) => ({\r\n      ...prevResource,\r\n      next: data.next,\r\n      results: data.results.reduce((acc, cur) => {\r\n        return acc.some((accResult) => accResult.id === cur.id)\r\n          ? acc\r\n          : [...acc, cur];\r\n      }, prevResource.results),\r\n    }));\r\n  } catch (err) {}\r\n};\r\n\r\n\r\nexport const followHelper = (profile, clickedProfile, following_id) => {\r\n    return profile.id === clickedProfile.id\r\n      ? \r\n        {\r\n          ...profile,\r\n          followers_count: profile.followers_count + 1,\r\n          following_id,\r\n        }\r\n      : profile.is_owner\r\n      ? \r\n        { ...profile, following_count: profile.following_count + 1 }\r\n      : \r\n        profile;\r\n  };\r\n\r\n  export const unfollowHelper = (profile, clickedProfile) => {\r\n    return profile.id === clickedProfile.id\r\n      ? \r\n        {\r\n          ...profile,\r\n          followers_count: profile.followers_count - 1,\r\n          following_id: null,\r\n        }\r\n      : profile.is_owner\r\n      ? \r\n        { ...profile, following_count: profile.following_count - 1 }\r\n      : \r\n        profile;\r\n  };\r\n\r\n\r\n\r\n  export const setTokenTimestamp = (data) => {\r\n    const refreshTokenTimestamp = jwtDecode(data?.refresh_token).exp;\r\n    localStorage.setItem(\"refreshTokenTimestamp\", refreshTokenTimestamp);\r\n  };\r\n  \r\n  export const shouldRefreshToken = () => {\r\n    return !!localStorage.getItem(\"refreshTokenTimestamp\");\r\n  };\r\n  \r\n  export const removeTokenTimestamp = () => {\r\n    localStorage.removeItem(\"refreshTokenTimestamp\");\r\n  };"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,sBAAsB;AAC/C,OAAOC,SAAS,MAAM,YAAY;AAGlC,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,WAAW,KAAK;EAC5D,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAML,QAAQ,CAACM,GAAG,CAACH,QAAQ,CAACI,IAAI,CAAC;IAClDH,WAAW,CAAEI,YAAY,KAAM;MAC7B,GAAGA,YAAY;MACfD,IAAI,EAAEF,IAAI,CAACE,IAAI;MACfE,OAAO,EAAEJ,IAAI,CAACI,OAAO,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;QACzC,OAAOD,GAAG,CAACE,IAAI,CAAEC,SAAS,IAAKA,SAAS,CAACC,EAAE,KAAKH,GAAG,CAACG,EAAE,CAAC,GACnDJ,GAAG,GACH,CAAC,GAAGA,GAAG,EAAEC,GAAG,CAAC;MACnB,CAAC,EAAEJ,YAAY,CAACC,OAAO;IACzB,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOO,GAAG,EAAE,CAAC;AACjB,CAAC;AAGD,OAAO,MAAMC,YAAY,GAAGA,CAACC,OAAO,EAAEC,cAAc,EAAEC,YAAY,KAAK;EACnE,OAAOF,OAAO,CAACH,EAAE,KAAKI,cAAc,CAACJ,EAAE,GAEnC;IACE,GAAGG,OAAO;IACVG,eAAe,EAAEH,OAAO,CAACG,eAAe,GAAG,CAAC;IAC5CD;EACF,CAAC,GACDF,OAAO,CAACI,QAAQ,GAEhB;IAAE,GAAGJ,OAAO;IAAEK,eAAe,EAAEL,OAAO,CAACK,eAAe,GAAG;EAAE,CAAC,GAE5DL,OAAO;AACb,CAAC;AAED,OAAO,MAAMM,cAAc,GAAGA,CAACN,OAAO,EAAEC,cAAc,KAAK;EACzD,OAAOD,OAAO,CAACH,EAAE,KAAKI,cAAc,CAACJ,EAAE,GAEnC;IACE,GAAGG,OAAO;IACVG,eAAe,EAAEH,OAAO,CAACG,eAAe,GAAG,CAAC;IAC5CD,YAAY,EAAE;EAChB,CAAC,GACDF,OAAO,CAACI,QAAQ,GAEhB;IAAE,GAAGJ,OAAO;IAAEK,eAAe,EAAEL,OAAO,CAACK,eAAe,GAAG;EAAE,CAAC,GAE5DL,OAAO;AACb,CAAC;AAID,OAAO,MAAMO,iBAAiB,GAAIpB,IAAI,IAAK;EACzC,MAAMqB,qBAAqB,GAAGzB,SAAS,CAACI,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsB,aAAa,CAAC,CAACC,GAAG;EAChEC,YAAY,CAACC,OAAO,CAAC,uBAAuB,EAAEJ,qBAAqB,CAAC;AACtE,CAAC;AAED,OAAO,MAAMK,kBAAkB,GAAGA,CAAA,KAAM;EACtC,OAAO,CAAC,CAACF,YAAY,CAACG,OAAO,CAAC,uBAAuB,CAAC;AACxD,CAAC;AAED,OAAO,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EACxCJ,YAAY,CAACK,UAAU,CAAC,uBAAuB,CAAC;AAClD,CAAC"},"metadata":{},"sourceType":"module"}