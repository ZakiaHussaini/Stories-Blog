{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Zakia hussaini/Desktop/Stories-Blog/frontends/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/Zakia hussaini/Desktop/Stories-Blog/frontends/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Zakia hussaini/Desktop/Stories-Blog/frontends/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Zakia hussaini/Desktop/Stories-Blog/frontends/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Zakia hussaini/Desktop/Stories-Blog/frontends/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import Form from\"react-bootstrap/Form\";import InputGroup from\"react-bootstrap/InputGroup\";import styles from\"../../styles/CommentCreateEditForm.module.css\";import Avatar from\"../../components/Avatar\";import{axiosRes}from\"../../api/axiosDefaults\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CommentCreateForm(props){var story=props.story,setStory=props.setStory,setComments=props.setComments,profileImage=props.profileImage,profile_id=props.profile_id;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var handleChange=function handleChange(event){setContent(event.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$axiosRes$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axiosRes.post(\"/comments/\",{content:content,story:story});case 4:_yield$axiosRes$post=_context.sent;data=_yield$axiosRes$post.data;setComments(function(prevComments){return _objectSpread(_objectSpread({},prevComments),{},{results:[data].concat(_toConsumableArray(prevComments.results))});});setStory(function(prevPost){return{results:[_objectSpread(_objectSpread({},prevPost.results[0]),{},{comments_count:prevPost.results[0].comments_count+1})]};});setContent(\"\");_context.next=13;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Form,{className:\"mt-2\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Link,{to:\"/profiles/\".concat(profile_id),children:/*#__PURE__*/_jsx(Avatar,{src:profileImage})}),/*#__PURE__*/_jsx(Form.Control,{className:styles.Form,placeholder:\"my comment...\",as:\"textarea\",value:content,onChange:handleChange,rows:2})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(styles.Button,\" btn d-block ml-auto\"),disabled:!content.trim(),type:\"submit\",children:\"post\"})]});}export default CommentCreateForm;","map":{"version":3,"names":["React","useState","Link","Form","InputGroup","styles","Avatar","axiosRes","jsx","_jsx","jsxs","_jsxs","CommentCreateForm","props","story","setStory","setComments","profileImage","profile_id","_useState","_useState2","_slicedToArray","content","setContent","handleChange","event","target","value","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axiosRes$post","data","wrap","_callee$","_context","prev","next","preventDefault","post","sent","prevComments","_objectSpread","results","concat","_toConsumableArray","prevPost","comments_count","t0","stop","_x","apply","arguments","className","onSubmit","children","Group","to","src","Control","placeholder","as","onChange","rows","Button","disabled","trim","type"],"sources":["C:/Users/Zakia hussaini/Desktop/Stories-Blog/frontends/src/pages/comments/CommentCreateForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\n\r\nimport styles from \"../../styles/CommentCreateEditForm.module.css\";\r\nimport Avatar from \"../../components/Avatar\";\r\nimport { axiosRes } from \"../../api/axiosDefaults\";\r\n\r\nfunction CommentCreateForm(props) {\r\n  const { story, setStory, setComments, profileImage, profile_id } = props;\r\n  const [content, setContent] = useState(\"\");\r\n\r\n  const handleChange = (event) => {\r\n    setContent(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const { data } = await axiosRes.post(\"/comments/\", {\r\n        content,\r\n        story,\r\n      });\r\n      setComments((prevComments) => ({\r\n        ...prevComments,\r\n        results: [data, ...prevComments.results],\r\n      }));\r\n      setStory((prevPost) => ({\r\n        results: [\r\n          {\r\n            ...prevPost.results[0],\r\n            comments_count: prevPost.results[0].comments_count + 1,\r\n          },\r\n        ],\r\n      }));\r\n      setContent(\"\");\r\n    } catch (err) {\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Form className=\"mt-2\" onSubmit={handleSubmit}>\r\n      <Form.Group>\r\n        <InputGroup>\r\n          <Link to={`/profiles/${profile_id}`}>\r\n            <Avatar src={profileImage} />\r\n          </Link>\r\n          <Form.Control\r\n            className={styles.Form}\r\n            placeholder=\"my comment...\"\r\n            as=\"textarea\"\r\n            value={content}\r\n            onChange={handleChange}\r\n            rows={2}\r\n          />\r\n        </InputGroup>\r\n      </Form.Group>\r\n      <button\r\n        className={`${styles.Button} btn d-block ml-auto`}\r\n        disabled={!content.trim()}\r\n        type=\"submit\"\r\n      >\r\n        post\r\n      </button>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default CommentCreateForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}